webpackJsonp([1],{0:function(e,t){},Huz3:function(e,t,n){"use strict";var r=n("mvHQ"),a=n.n(r),o=n("BvyM"),c=n.n(o),i=n("/Luh"),s=n.n(i),u=n("6gPI"),f=n.n(u);c.a.setLevel("debug");var d=function(e){return e.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")},h={install:function(e,t){c.a.trace(t);var n=f()(t.appID,t.apiKey,{protocol:"https:"}),r=n.initIndex(t.index),o=function(e){var t=s.a.defer();return r.clearCache(),r.search(e,function(e,n){e?(c.a.trace(e),t.reject(e)):u(n.hits).then(function(){t.resolve(n.hits)})}),t.promise},i=function(e,t,n){var r=s.a.defer(),a={query:t,filters:'teams: "'+e.data.teams.map(function(e){return e.team}).join('" OR teams: "')+'"',hitsPerPage:n||null};return c.a.trace(a),o(a).then(function(e){c.a.trace(e),r.resolve(e)}).catch(function(e){r.reject(e)}),r.promise},u=function(e){var t=s.a.defer(),n=[];return e.forEach(function(e){e=l(e),e.content.listCards=[],e.content.listItems||(e.content.listItems=[]),e.content.listItems.forEach(function(e){n.push(h(e))})}),c.a.trace(n),s.a.allSettled(n).then(function(e){t.resolve(e)}).catch(function(e){c.a.trace(e),t.reject(e)}),t.promise},h=function(e){var t=s.a.defer();return r.getObject(e,function(e,n){e?(c.a.trace(e),t.reject(e)):t.resolve(n)}),t.promise},l=function(e){return e.content||(e.content={description:e.description||e.sentence||e.text,listItems:e.listItems||[]}),console.log(a()(e.content)),e.sentence&&delete e.sentence,e.text&&delete e.text,e.description&&delete e.description,e},g=function(e,t){for(var n=s.a.defer(),r=[],a=Math.min(Math.max(Math.ceil(10/(t.length/400)),3),12),o=0;o<t.length;o+=400)r.push(t.substring(o,o+400));var u=r.map(function(t,n){return i(e,t,a)});return s.a.allSettled(u).then(function(e){var t=[].concat.apply([],e.map(function(e){return e.value}));t=m(t,"objectID"),c.a.trace(t),n.resolve(t)}).catch(function(e){c.a.trace(e)}),n.promise},m=function(e,t){for(var n,r=[],a=[],o=0;o<e.length;o++)n=e[o][t],-1===a.indexOf(n)&&(r.push(e[o]),a.push(n));return r},p=function(e,t,n){var r=s.a.defer(),a={hits:[],reminders:[],pings:[],memories:[]};c.a.trace(e,t),["Skip to content","Using","with screen readers","Search","Mail","COMPOSE","Labels","Inbox","Starred","Sent Mail","Drafts","More","---------- Forwarded message ----------","From: ","Date: ","Subject: ","To: ","Click here to Reply or Forward","GB","GB used","Manage","Program Policies","Powered by Google","Last account activity:","hour ago","hours ago","Details"].forEach(function(e){t.pageText=t.pageText.replace(e,"")});var o=["i","a","of","me","my","is","im","so","all","get","how","new","out","the","use","best","name","next","take","what","image","something"];try{var i=[];n.forEach(function(e){var n=0;e.context.forEach(function(e){var r=String(e.value);if(-1===o.indexOf(r.toLowerCase())&&r.length>1){var a=new RegExp(d(r),"gi"),c=(t.pageText.match(a)||[]).length*r.length;n+=c,c&&-1===i.indexOf(r)&&i.push(r)}}),n>100?a.hits.push(e):n>0&&a.memories.push(e)}),c.a.debug(i),a.reminders=n.filter(function(e){var n=t.baseUrl.replace(".com","").replace(".co.uk","").replace(".org","");return c.a.info(e.triggerURL),e.triggerURL&&(e.triggerURL.indexOf(n)>-1||e.triggerURL.indexOf(n)>-1)}),a.pings=a.reminders,a.pings.forEach(function(e){e.highlight=!0}),a.memories=m(a.memories,"objectID"),c.a.debug(a),r.resolve(a)}catch(e){c.a.error(e)}return r.promise};this.advancedSearch=o,this.searchCards=i,this.compoundSearch=g,this.getPageResults=p}};t.a=h},"aG/X":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("fZjL"),a=n.n(r),o=n("/5sW"),c=n("BvyM"),i=n.n(c),s=n("/Luh"),u=n.n(s),f=n("Huz3");i.a.setLevel("debug");var d={live:{Jeremy:"1627888800569309",Matt:"1455707247850069",Carol:"1459068990878077",Harriet:"1478776232161468",Jonny:"1513554438729753"},staging:{Jeremy:"1366746370089527",Matt:"1528134990563202"},local:{Jeremy:"1300120880110773",Matt:"1428419100528438"},drive:{Jeremy:"104380110279658920175",ACME:"101118387301286232222"}},h=d.live.ACME,l={},g=[],m=0,p={appID:"I2VKMNNAXI",apiKey:"2b8406f84cd4cc507da173032c46ee7b",index:"ForgetMeNot_Context_Test"};o.a.use(f.a,p),chrome.browserAction.onClicked.addListener(function(e){chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,{action:"toggleDrawer"},function(e){i.a.info(e)})})}),chrome.runtime.onMessage.addListener(function(e,t,n){try{if(i.a.debug(t.tab?"From a content script: "+t.tab.url:"From the extension",e),"getPageResults"===e.action)return v(e.data).then(function(e){i.a.debug(e),n(e)}),!0;if("checkPage"===e.action)return i.a.trace(e.data),w().then(function(){return f.a.getPageResults(h,e.data,g)}).then(function(e){x(t.tab.id,e),l=e,n(e)}).catch(function(e){i.a.error(e)}),!0;if("getUser"===e.action)return console.log(h),n(h),!0;if("refreshCards"===e.action)return I(),!0;if("popupOpened"===e.event)return chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,{event:"popupOpened"},function(e){})}),!0}catch(e){i.a.error(e)}});var v=function(e){var t,n=u.a.defer();return i.a.debug(1),w().then(b).then(function(r){i.a.debug(r.id),t=r.id,i.a.debug(l),l[t]?n.resolve(l[t]):(e||(e={tabID:t}),i.a.debug(e),y(e).then(function(e){return i.a.debug(e),f.a.getPageResults(h,e,g)}).then(function(e){i.a.debug(e),x(t,e),n.resolve(e)}).catch(function(e){n.reject(e)}))}).catch(function(e){n.reject(e)}),n.promise},b=function(){var e=u.a.defer();return chrome.tabs.query({active:!0,currentWindow:!0},function(t){e.resolve(t[0])}),e.promise},y=function(e){var t=u.a.defer();return e.pageData?t.resolve(e.pageData):e.tabID?M(e.tabID,{action:"getPageData"}).then(function(e){t.resolve(e)}):t.reject(),t.promise},M=function(e,t){var n=u.a.defer();return chrome.tabs.sendMessage(e,t,function(e){i.a.debug(e),n.resolve(e)}),n.promise},x=function(e,t){l[e]=t,chrome.tabs.query({active:!0,currentWindow:!0},function(e){a()(l).forEach(function(t){0===e.filter(function(e){return e.id===t}).length&&delete l[t]}),i.a.debug(l)})},w=function(){var e=u.a.defer();return new Date-m>3e5?I().then(function(){e.resolve()}).catch(function(t){i.a.error(t),e.reject(t)}):e.resolve(),e.promise},I=function(){var e=u.a.defer();return m=new Date,f.a.searchCards(h,"",1e3).then(function(t){g=t,i.a.debug(g),e.resolve()}).catch(function(t){i.a.error(t),e.reject(t)}),e.promise};I()}},["aG/X"]);
//# sourceMappingURL=eventPage.js.map