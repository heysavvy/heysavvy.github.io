{"version":3,"sources":["webpack:///static/chrome/contentScript.js","webpack:///./src/chrome/content-script.js"],"names":["webpackJsonp","A7na","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_loglevel__","__WEBPACK_IMPORTED_MODULE_0_loglevel___default","n","a","setLevel","pingDiv","getPageText","document","body","innerText","getUrl","window","location","href","getBaseUrl","host","replace","collectPageData","pageText","url","baseUrl","drawer","createElement","iframe","onload","e","sendPageText","trace","debug","chrome","runtime","sendMessage","action","data","response","numPings","pings","length","existingPings","getElementsByClassName","parentNode","removeChild","remove","style","cssText","pageFloat","innerHTML","appendChild","text1","createTextNode","className","pageSpan","onclick","openDrawer","onMessage","addListener","request","sender","sendResponse","pageData","event","toggleDrawer","displayPageResults","info","frames","contentWindow","postMessage","message","pageResults","getAttribute","dealtWith","right","boxShadow","pointerEvents","setAttribute","closeDrawer","width","addEventListener","console","log","src","getURL","id","close","contains","target","timeSaved","error"],"mappings":"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","file":"static/chrome/contentScript.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ \"A7na\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_loglevel__ = __webpack_require__(\"BvyM\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_loglevel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_loglevel__);\n/* global chrome */\n\n__WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.setLevel('debug');\n\nvar getPageText = function getPageText() {\n  return document.body.innerText;\n};\nvar getUrl = function getUrl() {\n  return window.location.href;\n};\nvar getBaseUrl = function getBaseUrl() {\n  return window.location.host.replace('www.', '');\n};\nvar collectPageData = function collectPageData() {\n  var pageText = getPageText();\n  var url = getUrl();\n  var baseUrl = getBaseUrl();\n  return { url: url, baseUrl: baseUrl, pageText: pageText };\n};\n\nvar pingDiv;\nvar drawer = document.createElement('div');\nvar iframe = document.createElement('iframe');\n\n// document.addEventListener('DOMContentLoaded', function() { sendPageText() }, false)\n\nwindow.onload = function (e) {\n  sendPageText();\n};\n\nvar sendPageText = function sendPageText() {\n  __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace(sendPageText);\n  var pageText = getPageText();\n  var url = getUrl();\n  var baseUrl = getBaseUrl();\n  __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace([pageText]);\n  __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.debug(url);\n  chrome.runtime.sendMessage({ action: 'checkPage', data: { url: url, baseUrl: baseUrl, pageText: pageText } }, function (response) {\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.debug(response);\n    var numPings = response.pings.length;\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.debug('numPings: ', numPings);\n    if (numPings && pingDiv !== -1) {\n      var existingPings = document.getElementsByClassName('forget-me-not-ping');\n      while (existingPings.length > 0) {\n        __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace('Deleting existing ping');\n        existingPings[0].parentNode.removeChild(existingPings[0]);\n      }\n      if (pingDiv) pingDiv.remove();\n      pingDiv = document.createElement('div');\n      pingDiv.style.cssText = '' + 'position: fixed;' + 'top: 0;' + 'right: 0;' + 'width: 300px;' + 'margin: 20px;' + 'padding: 20px 35px;' + 'font-size: 16px;' + 'font-weight: normal;' + 'color: #333;' + 'box-shadow: rgba(50, 50, 50, 0.95) 0px 0px 30px;' + 'border: none;' + 'border-radius: 10px;' + 'z-index: 1000000;' + 'background: white;' + 'cursor: pointer;' + 'line-height: 1.4;' + 'font-family: Arial, sans-serif;';\n      var pageFloat = document.createElement('div');\n      pageFloat.style.cssText = '' + 'float: right;';\n      pageFloat.innerHTML = 'ðŸ‘†ðŸ‘†';\n      pingDiv.appendChild(pageFloat);\n      var text1 = document.createTextNode((numPings === 1 ? 'One memory' : numPings + ' memories') + ' relevant to this page! ðŸ˜ƒ');\n      text1.className = 'forget-me-not-ping';\n      pingDiv.appendChild(text1);\n      var pageSpan = document.createElement('span');\n      pageSpan.style.cssText = '' + 'color: grey;' + 'font-style: italic;' + 'margin-left: 5px;';\n      pageSpan.innerHTML = 'Click to view';\n      pingDiv.appendChild(pageSpan);\n      pingDiv.onclick = function (e) {\n        openDrawer(e);\n        pingDiv.remove();\n        pingDiv = -1;\n      };\n      document.body.appendChild(pingDiv);\n      __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace(pingDiv);\n    }\n  });\n};\n\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n  __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace('Request received');\n  if (request.action === 'getPageData') {\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.debug('1');\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace('Received getPageData request');\n    var pageData = collectPageData();\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.debug(pageData);\n    sendResponse(pageData);\n  }\n  if (request.event === 'popupOpened') {\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace('Received popupOpened event');\n    if (pingDiv) pingDiv.remove();\n  }\n  if (request.action === 'toggleDrawer') {\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.trace('Received toggleDrawer action');\n    toggleDrawer();\n  }\n});\n\nsendPageText();\n\nvar createDrawer = function createDrawer() {\n  try {\n    drawer.style.cssText = '' + 'all: initial;' + 'position: fixed;' + 'top: 0;' + 'right: -400px;' + 'height: 100%;' + 'width: 400px;' + 'z-index: 1000000000000000;' + 'background: white;' + 'box-shadow: rgba(0, 0, 0, 0.4) -1px 3px 50px 0px;' + 'transition: all 0.6s ease 0s;';\n    drawer.setAttribute('data-opened', 'false');\n\n    iframe.src = chrome.runtime.getURL('./sidebar.html');\n    iframe.id = 'forgetmenot-frame';\n    iframe.style.cssText = '' + 'all: initial;' + 'position: absolute;' + 'top: 0;' + 'height: 100%;' + 'left: -100%;' + 'width: 200%;' + 'border: none;' + 'pointer-events: none;';\n\n    var close = document.createElement('a');\n    close.style.cssText = '' + 'all: initial;' + 'position: absolute;' + 'top: 6px;' + 'left: 4px;' + 'z-index: 2147483647;' + 'font-size: 20px;' + 'color: #999;' + 'font-family: Arial;' + 'border-radius: 6px;' + 'padding: 0px 9px 2px;' + 'cursor: pointer;' + 'font-weight: bold;' + 'pointer-events: all;';\n    close.appendChild(document.createTextNode('x'));\n\n    // Click Events\n    close.onclick = function (e) {\n      closeDrawer(e);\n    };\n    document.addEventListener('click', function (event) {\n      // log.info(pingDiv)\n      var isClickInside = drawer.contains(event.target) || pingDiv && pingDiv !== -1 && pingDiv.contains(event.target);\n\n      if (!isClickInside) {\n        closeDrawer(event);\n      }\n    });\n\n    var timeSaved = document.createElement('div');\n    timeSaved.style.cssText = '' + 'all: initial;' + 'font-family: Lato, Arial, sans-serif;' + 'position: absolute;' + 'bottom: 0;' + 'left: 0;' + 'right: 0;' + 'padding: 20px;' + 'background: white;' + 'box-shadow: 0px 0px 30px rgba(150,150,150,0.5)' + 'color: #999;' + 'text-align: center;' + 'font-weight: bold;';\n    timeSaved.appendChild(document.createTextNode('You\\'ve saved 4.5 hours so far this month! ðŸ’ª'));\n\n    drawer.appendChild(close);\n    drawer.appendChild(iframe);\n    drawer.appendChild(timeSaved);\n    document.body.appendChild(drawer);\n  } catch (e) {\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.error(e);\n  }\n};\nvar displayPageResults = function displayPageResults() {\n  __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.info('Sending setLoading to frame');\n  window.frames['forgetmenot-frame'].contentWindow.postMessage({ action: 'setLoading' }, '*');\n  chrome.runtime.sendMessage({ action: 'getPageResults', data: { pageData: collectPageData() } }, function (response) {\n    var message = { action: 'updatePageResults', data: { pageResults: response } };\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.info(message);\n    window.frames['forgetmenot-frame'].contentWindow.postMessage(message, '*');\n  });\n};\nvar openDrawer = function openDrawer(e) {\n  // log.info(drawer.getAttribute('data-opened'))\n  if (drawer.getAttribute('data-opened') !== 'true' && (!e || !e.dealtWith)) {\n    displayPageResults();\n    drawer.style.right = '0px';\n    drawer.style.boxShadow = 'rgba(0, 0, 0, 0.4) -1px 3px 50px 0px';\n    iframe.style.pointerEvents = 'all';\n    drawer.setAttribute('data-opened', 'true');\n    __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.info(drawer.getAttribute('data-opened'));\n  }\n  if (e) e.dealtWith = true;\n};\nvar closeDrawer = function closeDrawer(e) {\n  // log.info(drawer.getAttribute('data-opened'))\n  if (drawer.getAttribute('data-opened') === 'true' && (!e || !e.dealtWith)) {\n    drawer.style.right = '-' + drawer.style.width;\n    drawer.style.boxShadow = 'none';\n    iframe.style.pointerEvents = 'none';\n    drawer.setAttribute('data-opened', 'false');\n  }\n  // log.info(drawer.getAttribute('data-opened'))\n  if (e) e.dealtWith = true;\n};\nvar toggleDrawer = function toggleDrawer(e) {\n  if (drawer.getAttribute('data-opened') === 'true') {\n    closeDrawer(e);\n  } else {\n    openDrawer(e);\n  }\n};\n\nwindow.addEventListener('message', function (event) {\n  switch (event.data.action) {\n    case 'getPageResults':\n      __WEBPACK_IMPORTED_MODULE_0_loglevel___default.a.info(5);\n      displayPageResults();\n      break;\n    case 'closeDrawer':\n      console.log('closeDrawer');\n      closeDrawer();\n      break;\n    default:\n  }\n}, false);\n\ncreateDrawer();\n\n/***/ })\n\n},[\"A7na\"]);\n\n\n// WEBPACK FOOTER //\n// static/chrome/contentScript.js","/* global chrome */\nimport log from 'loglevel'\nlog.setLevel('debug')\n\nconst getPageText = function() {\n  return document.body.innerText\n}\nconst getUrl = function() {\n  return window.location.href\n}\nconst getBaseUrl = function() {\n  return window.location.host.replace('www.', '')\n}\nconst collectPageData = function() {\n  const pageText = getPageText()\n  const url = getUrl()\n  const baseUrl = getBaseUrl()\n  return {url: url, baseUrl: baseUrl, pageText: pageText}\n}\n\nvar pingDiv\nconst drawer = document.createElement('div')\nconst iframe = document.createElement('iframe')\n\n// document.addEventListener('DOMContentLoaded', function() { sendPageText() }, false)\n\nwindow.onload = function(e) {\n  sendPageText()\n}\n\nconst sendPageText = function() {\n  log.trace(sendPageText)\n  const pageText = getPageText()\n  const url = getUrl()\n  const baseUrl = getBaseUrl()\n  log.trace([pageText])\n  log.debug(url)\n  chrome.runtime.sendMessage({action: 'checkPage', data: {url: url, baseUrl: baseUrl, pageText: pageText}}, function(response) {\n    log.debug(response)\n    const numPings = response.pings.length\n    log.debug('numPings: ', numPings)\n    if (numPings && pingDiv !== -1) {\n      const existingPings = document.getElementsByClassName('forget-me-not-ping')\n      while (existingPings.length > 0) {\n        log.trace('Deleting existing ping')\n        existingPings[0].parentNode.removeChild(existingPings[0])\n      }\n      if (pingDiv) pingDiv.remove()\n      pingDiv = document.createElement('div')\n      pingDiv.style.cssText = ''\n        + 'position: fixed;'\n        + 'top: 0;'\n        + 'right: 0;'\n        + 'width: 300px;'\n        + 'margin: 20px;'\n        + 'padding: 20px 35px;'\n        + 'font-size: 16px;'\n        + 'font-weight: normal;'\n        + 'color: #333;'\n        + 'box-shadow: rgba(50, 50, 50, 0.95) 0px 0px 30px;'\n        + 'border: none;'\n        + 'border-radius: 10px;'\n        + 'z-index: 1000000;'\n        + 'background: white;'\n        + 'cursor: pointer;'\n        + 'line-height: 1.4;'\n        + 'font-family: Arial, sans-serif;'\n      var pageFloat = document.createElement('div')\n      pageFloat.style.cssText = ''\n      + 'float: right;'\n      pageFloat.innerHTML = 'ðŸ‘†ðŸ‘†'\n      pingDiv.appendChild(pageFloat)\n      const text1 = document.createTextNode((numPings === 1 ? 'One memory' : numPings + ' memories') + ' relevant to this page! ðŸ˜ƒ')\n      text1.className = 'forget-me-not-ping'\n      pingDiv.appendChild(text1)\n      var pageSpan = document.createElement('span')\n      pageSpan.style.cssText = ''\n        + 'color: grey;'\n        + 'font-style: italic;'\n        + 'margin-left: 5px;'\n      pageSpan.innerHTML = 'Click to view'\n      pingDiv.appendChild(pageSpan)\n      pingDiv.onclick = function(e) {\n        openDrawer(e)\n        pingDiv.remove()\n        pingDiv = -1\n      }\n      document.body.appendChild(pingDiv)\n      log.trace(pingDiv)\n    }\n  })\n}\n\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n  log.trace('Request received')\n  if (request.action === 'getPageData') {\n    log.debug('1')\n    log.trace('Received getPageData request')\n    const pageData = collectPageData()\n    log.debug(pageData)\n    sendResponse(pageData)\n  }\n  if (request.event === 'popupOpened') {\n    log.trace('Received popupOpened event')\n    if (pingDiv) pingDiv.remove()\n  }\n  if (request.action === 'toggleDrawer') {\n    log.trace('Received toggleDrawer action')\n    toggleDrawer()\n  }\n})\n\nsendPageText()\n\nconst createDrawer = function() {\n  try {\n    drawer.style.cssText = ''\n      + 'all: initial;'\n      + 'position: fixed;'\n      + 'top: 0;'\n      + 'right: -400px;'\n      + 'height: 100%;'\n      + 'width: 400px;'\n      + 'z-index: 1000000000000000;'\n      + 'background: white;'\n      + 'box-shadow: rgba(0, 0, 0, 0.4) -1px 3px 50px 0px;'\n      + 'transition: all 0.6s ease 0s;'\n    drawer.setAttribute('data-opened', 'false')\n\n    iframe.src = chrome.runtime.getURL('./sidebar.html')\n    iframe.id = 'forgetmenot-frame'\n    iframe.style.cssText = ''\n      + 'all: initial;'\n      + 'position: absolute;'\n      + 'top: 0;'\n      + 'height: 100%;'\n      + 'left: -100%;'\n      + 'width: 200%;'\n      + 'border: none;'\n      + 'pointer-events: none;'\n\n    const close = document.createElement('a')\n    close.style.cssText = ''\n      + 'all: initial;'\n      + 'position: absolute;'\n      + 'top: 6px;'\n      + 'left: 4px;'\n      + 'z-index: 2147483647;'\n      + 'font-size: 20px;'\n      + 'color: #999;'\n      + 'font-family: Arial;'\n      + 'border-radius: 6px;'\n      + 'padding: 0px 9px 2px;'\n      + 'cursor: pointer;'\n      + 'font-weight: bold;'\n      + 'pointer-events: all;'\n    close.appendChild(document.createTextNode('x'))\n\n    // Click Events\n    close.onclick = function(e) {\n      closeDrawer(e)\n    }\n    document.addEventListener('click', function(event) {\n      // log.info(pingDiv)\n      var isClickInside = drawer.contains(event.target) || (pingDiv && pingDiv !== -1 && pingDiv.contains(event.target))\n\n      if (!isClickInside) {\n        closeDrawer(event)\n      }\n    })\n\n    const timeSaved = document.createElement('div')\n    timeSaved.style.cssText = ''\n      + 'all: initial;'\n      + 'font-family: Lato, Arial, sans-serif;'\n      + 'position: absolute;'\n      + 'bottom: 0;'\n      + 'left: 0;'\n      + 'right: 0;'\n      + 'padding: 20px;'\n      + 'background: white;'\n      + 'box-shadow: 0px 0px 30px rgba(150,150,150,0.5)'\n      + 'color: #999;'\n      + 'text-align: center;'\n      + 'font-weight: bold;'\n    timeSaved.appendChild(document.createTextNode('You\\'ve saved 4.5 hours so far this month! ðŸ’ª'))\n\n    drawer.appendChild(close)\n    drawer.appendChild(iframe)\n    drawer.appendChild(timeSaved)\n    document.body.appendChild(drawer)\n  } catch (e) {\n    log.error(e)\n  }\n}\nconst displayPageResults = function() {\n  log.info('Sending setLoading to frame')\n  window.frames['forgetmenot-frame'].contentWindow.postMessage({action: 'setLoading'}, '*')\n  chrome.runtime.sendMessage({action: 'getPageResults', data: {pageData: collectPageData()}}, function(response) {\n    const message = {action: 'updatePageResults', data: {pageResults: response}}\n    log.info(message)\n    window.frames['forgetmenot-frame'].contentWindow.postMessage(message, '*')\n  })\n}\nconst openDrawer = function(e) {\n  // log.info(drawer.getAttribute('data-opened'))\n  if (drawer.getAttribute('data-opened') !== 'true' && (!e || !e.dealtWith)) {\n    displayPageResults()\n    drawer.style.right = '0px'\n    drawer.style.boxShadow = 'rgba(0, 0, 0, 0.4) -1px 3px 50px 0px'\n    iframe.style.pointerEvents = 'all'\n    drawer.setAttribute('data-opened', 'true')\n    log.info(drawer.getAttribute('data-opened'))\n  }\n  if (e) e.dealtWith = true\n}\nconst closeDrawer = function(e) {\n  // log.info(drawer.getAttribute('data-opened'))\n  if (drawer.getAttribute('data-opened') === 'true' && (!e || !e.dealtWith)) {\n    drawer.style.right = '-' + drawer.style.width\n    drawer.style.boxShadow = 'none'\n    iframe.style.pointerEvents = 'none'\n    drawer.setAttribute('data-opened', 'false')\n  }\n  // log.info(drawer.getAttribute('data-opened'))\n  if (e) e.dealtWith = true\n}\nconst toggleDrawer = function(e) {\n  if (drawer.getAttribute('data-opened') === 'true') {\n    closeDrawer(e)\n  } else {\n    openDrawer(e)\n  }\n}\n\nwindow.addEventListener('message', function(event) {\n  switch (event.data.action) {\n    case 'getPageResults':\n      log.info(5)\n      displayPageResults()\n      break\n    case 'closeDrawer':\n      console.log('closeDrawer')\n      closeDrawer()\n      break\n    default:\n  }\n}, false)\n\ncreateDrawer()\n\n\n\n// WEBPACK FOOTER //\n// ./src/chrome/content-script.js"],"sourceRoot":""}