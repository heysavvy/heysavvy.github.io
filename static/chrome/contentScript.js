webpackJsonp([2],{A7na:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("BvyM"),o=n.n(a);o.a.setLevel("debug");var i,r=function(){return document.body.innerText},d=function(){return window.location.href},s=function(){return window.location.host.replace("www.","")},c=function(){var e=r();return{url:d(),baseUrl:s(),pageText:e}},l=document.createElement("div"),p=document.createElement("iframe");window.onload=function(e){u()};var u=function e(){o.a.trace(e);var t=r(),n=d(),a=s();o.a.trace([t]),o.a.debug(n),chrome.runtime.sendMessage({action:"checkPage",data:{url:n,baseUrl:a,pageText:t}},function(e){o.a.debug(e);var t=e.pings.length;if(o.a.debug("numPings: ",t),t&&-1!==i){for(var n=document.getElementsByClassName("forget-me-not-ping");n.length>0;)o.a.trace("Deleting existing ping"),n[0].parentNode.removeChild(n[0]);i&&i.remove(),i=document.createElement("div"),i.style.cssText="position: fixed;top: 0;right: 0;width: 300px;margin: 20px;padding: 20px 35px;font-size: 16px;font-weight: normal;color: #333;box-shadow: rgba(50, 50, 50, 0.95) 0px 0px 30px;border: none;border-radius: 10px;z-index: 1000000;background: white;cursor: pointer;line-height: 1.4;font-family: Arial, sans-serif;";var a=document.createElement("div");a.style.cssText="float: right;",a.innerHTML="ðŸ‘†ðŸ‘†",i.appendChild(a);var r=document.createTextNode((1===t?"One memory":t+" memories")+" relevant to this page! ðŸ˜ƒ");r.className="forget-me-not-ping",i.appendChild(r);var d=document.createElement("span");d.style.cssText="color: grey;font-style: italic;margin-left: 5px;",d.innerHTML="Click to view",i.appendChild(d),i.onclick=function(e){f(e),i.remove(),i=-1},document.body.appendChild(i),o.a.trace(i)}})};chrome.runtime.onMessage.addListener(function(e,t,n){if(o.a.trace("Request received"),"getPageData"===e.action){o.a.debug("1"),o.a.trace("Received getPageData request");var a=c();o.a.debug(a),n(a)}"popupOpened"===e.event&&(o.a.trace("Received popupOpened event"),i&&i.remove()),"toggleDrawer"===e.action&&(o.a.trace("Received toggleDrawer action"),h())}),u();var g=function(){o.a.info("Sending setLoading to frame"),window.frames["forgetmenot-frame"].contentWindow.postMessage({action:"setLoading"},"*"),chrome.runtime.sendMessage({action:"getPageResults",data:{pageData:c()}},function(e){var t={action:"updatePageResults",data:{pageResults:e}};o.a.info(t),window.frames["forgetmenot-frame"].contentWindow.postMessage(t,"*")})},f=function(e){"true"===l.getAttribute("data-opened")||e&&e.dealtWith||(g(),l.style.right="0px",l.style.boxShadow="rgba(0, 0, 0, 0.4) -1px 3px 50px 0px",p.style.pointerEvents="all",l.setAttribute("data-opened","true"),o.a.info(l.getAttribute("data-opened"))),e&&(e.dealtWith=!0)},m=function(e){"true"!==l.getAttribute("data-opened")||e&&e.dealtWith||(l.style.right="-"+l.style.width,l.style.boxShadow="none",p.style.pointerEvents="none",l.setAttribute("data-opened","false")),e&&(e.dealtWith=!0)},h=function(e){"true"===l.getAttribute("data-opened")?m(e):f(e)};window.addEventListener("message",function(e){switch(e.data.action){case"getPageResults":o.a.info(5),g();break;case"closeDrawer":console.log("closeDrawer"),m()}},!1),function(){try{l.style.cssText="all: initial;position: fixed;top: 0;right: -400px;height: 100%;width: 400px;z-index: 1000000000000000;background: white;box-shadow: rgba(0, 0, 0, 0.4) -1px 3px 50px 0px;transition: all 0.6s ease 0s;",l.setAttribute("data-opened","false"),p.src=chrome.runtime.getURL("./sidebar.html"),p.id="forgetmenot-frame",p.style.cssText="all: initial;position: absolute;top: 0;height: 100%;left: -100%;width: 200%;border: none;pointer-events: none;";var e=document.createElement("a");e.style.cssText="all: initial;position: absolute;top: 6px;left: 4px;z-index: 2147483647;font-size: 20px;color: #999;font-family: Arial;border-radius: 6px;padding: 0px 9px 2px;cursor: pointer;font-weight: bold;pointer-events: all;",e.appendChild(document.createTextNode("x")),e.onclick=function(e){m(e)},document.addEventListener("click",function(e){l.contains(e.target)||i&&-1!==i&&i.contains(e.target)||m(e)});var t=document.createElement("div");t.style.cssText="all: initial;font-family: Lato, Arial, sans-serif;position: absolute;bottom: 0;left: 0;right: 0;padding: 20px;background: white;box-shadow: 0px 0px 30px rgba(150,150,150,0.5)color: #999;text-align: center;font-weight: bold;",t.appendChild(document.createTextNode("You've saved 4.5 hours so far this month! ðŸ’ª")),l.appendChild(e),l.appendChild(p),l.appendChild(t),document.body.appendChild(l)}catch(e){o.a.error(e)}}()}},["A7na"]);
//# sourceMappingURL=contentScript.js.map